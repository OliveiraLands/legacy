<{if $actionForm->hasError()}>
<div class="alert alert-error">
  <ul>
    <{foreach item=message from=$actionForm->getErrorMessages()}>
      <li><{$message|xoops_escape}></li>
    <{/foreach}>
  </ul>
</div>
<{/if}>

<form class="form-horizontal" action="comment_post.php" method="post">
  <fieldset>
  <{xoops_token form=$actionForm}>
  <{xoops_input type=hidden name=com_id value=$actionForm->get('com_id')}>
  <{xoops_input type=hidden name=com_pid value=$actionForm->get('com_pid')}>
  <{xoops_input type=hidden name=com_rootid value=$actionForm->get('com_rootid')}>
  <{xoops_input type=hidden name=com_modid value=$actionForm->get('com_modid')}>
  <{xoops_input type=hidden name=com_itemid value=$actionForm->get('com_itemid')}>
  <{xoops_input type=hidden name=com_exparams value=$actionForm->get('com_exparams')}>
  <{xoops_input type=hidden name=com_order value=$com_order}>
  <{foreach from=$extraParams key='key' item='value'}>
    <{xoops_input type='hidden' name=$key value=$value}>
  <{/foreach}>
    <legend><{$smarty.const._MD_LEGACY_LANG_POST}></legend>
    <div class="control-group">
      <label class="control-label"><{$smarty.const._MD_LEGACY_LANG_COMMENT_RULE}></label>
      <div class="controls">
        <{if $xoopsModuleConfig.com_rule == XOOPS_COMMENT_APPROVEALL}>
          <{$smarty.const._CM_COMAPPROVEALL}>
        <{elseif $xoopsModuleConfig.com_rule == XOOPS_COMMENT_APPROVEUSER}>
          <{$smarty.const._CM_COMAPPROVEUSER}>
        <{else}>
          <{$smarty.const._CM_COMAPPROVEADMIN}>
        <{/if}>
      </div>
    </div>
    <div class="control-group">
      <label for="com_title" class="control-label"><{$smarty.const._MD_LEGACY_LANG_COM_TITLE}></label>
      <div class="controls">
        <{xoops_input type=text name=com_title value=$actionForm->get('com_title') size=50 maxlength=255}>
      </div>
    </div>
    <div class="control-group">
      <label for="com_icon" class="control-label"><{$smarty.const._MD_LEGACY_LANG_COM_ICON}></label>
      <div class="controls">
        <{foreach item=icon from=$subjectIcons}>
          <label><{xoops_input type=radio name=com_icon value=$icon->get('filename') default=$actionForm->get('filename')}><img src="<{$xoops_url}>/images/subject/<{$icon->getShow('filename')}>" /></label>
        <{/foreach}>
      </div>
    </div>
    <div class="control-group">
      <label for="com_text" class="control-label"><{$smarty.const._MD_LEGACY_LANG_COM_TEXT}></label>
      <div class="controls">
        <{xoops_dhtmltarea type=text rows=15 cols=60 name=com_text value=$actionForm->get('com_text')}>
      </div>
    </div>
      <div class="control-group">
        <label for="dohtml" class="control-label"><{$smarty.const._MD_LEGACY_LANG_OPTION}></label>
        <div class="controls">
          <{if $xoops_isadmin}>
            <label><{xoops_input type=checkbox name=dohtml value=1 default=$actionForm->get('dohtml')}> <{$smarty.const._MD_LEGACY_LANG_DOHTML}></label><br />
          <{/if}>
        <label><{xoops_input type=checkbox name=dosmiley value=1 default=$actionForm->get('dosmiley')}> <{$smarty.const._MD_LEGACY_LANG_DOSMILEY}></label><br />
        <label><{xoops_input type=checkbox name=doxcode value=1 default=$actionForm->get('doxcode')}> <{$smarty.const._MD_LEGACY_LANG_DOXCODE}></label><br />
        <label><{xoops_input type=checkbox name=dobr value=1 default=$actionForm->get('dobr')}> <{$smarty.const._MD_LEGACY_LANG_DOBR}></label>
      </div>
    </div>
    <div class="control-actions">
      <button class="btn btn-primary" type="submit" name="com_dopost" value="<{$smarty.const._SUBMIT}>"><{$smarty.const._SUBMIT}></button>
      <button class="btn" type="button" value="<{$smarty.const._BACK}>" onclick="javascript:history.back()"><{$smarty.const._BACK}></button>
    </div>
  </fieldset>
</form>